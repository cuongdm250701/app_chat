

<%= link_to "Back to Home", root_path %>
<div class='header-groups'>
    <h1>List Group</h1>
    <% if can? :create, Group %>
       <%= link_to "New Group", new_group_path %>
    <% end %>
</div>

<div>
    <div>
        <%= search_form_for @q do |f| %>
            <%= f.label :group_name %>
            <%= f.search_field :name_cont %>
            <%= f.submit "Search!" %>
        <% end %>
    </div>
    <ul>
        <% if !@groups.blank? %>
            <% @groups.each do |group| %>
                <li class='group-link' data-group-id="<%= group.id %>">
                    <%= link_to "#{group.name}", group_path(group.id) %>
                    <% if current_user&.admin? %>
                        <%= link_to "Edit", edit_group_path(group.id) %>
                        <%= 
                            link_to "Delete", group_path(group.id), 
                            method: :delete, 
                            data: { confirm: "Are you sure you want to delete this group?" } 
                        %>
                        <%= link_to "Add user", add_users_group_path(group.id) %> 
                    <% end %>
                </li>
            <% end %>
        <% else %>
             <h4> You don't have any groups </h4>   
        <% end %>
        <%= paginate @groups %>
    </ul>
</div>

